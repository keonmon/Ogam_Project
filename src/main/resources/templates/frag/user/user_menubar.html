<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.com">

<th:block th:fragment="userMenubar(notifiSelectList)" class="frg">
    <link rel="stylesheet" type="text/css" href="/css/notifi.css" />
    <div class="menubar">
        <div id="left-menu">
            <span id="writeDiary">
                <a href="/writeDiary1">Í∞êÏ†ï ÏûëÏÑ±ÌïòÍ∏∞</a>
            </span>
        </div>
        <div id="rigth-menu">
            <span class="board">
                <a href="/board">
                    <span>Í≥µÏßÄ</span>
                </a>
            </span>
            <th:span class="myProfile" th:if="${session.loginUserNick}">[[${session.loginUserNick}]]Îãò Î∞òÍ∞ÄÏõåÏöî!üòÜ</th:span>
            <div class="myMenu ">
                <a href="/MyPage">
                    <div class="subMenu">ÎÇ¥ Ï†ïÎ≥¥ ÏàòÏ†ï</div>
                </a>
                <a href="/blockPage">
                    <div class="subMenu">Ï∞®Îã® ÏÇ¨Ïö©Ïûê Î™©Î°ù</div>
                </a>
            </div>
            <span class="notifi">
                <i class="fa-regular fa-comment-dots"></i>
            </span>
            <span>
                <img src="/img/logoImg.png" id="user_img">
            </span>
            <th:block th:unless="${session.loginUser}">
            <span class="login">
                <a href="/loginPage">
                    <span>Î°úÍ∑∏Ïù∏</span>
                </a>
            </span>
            </th:block>
            <th:block th:if="${session.loginUser}">
            <span class="logout">
                <a href='#' onclick="if(confirm('Ï†ïÎßêÎ°ú Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÎ†§Í≥†Ïöî..?üò®')) location.href='/logout'">
                    <span>Î°úÍ∑∏ÏïÑÏõÉ</span>
                </a>
            </span>
            </th:block>
        </div>

        <div id="notifi_modal notifi_wrapModal" class="notifi_wrapModal">
            <div id="notifi_title">ÏïåÎ¶º</div>
            <div class="titleText">ÏµúÍ∑º ÏïåÎ¶º</div>
            <div class="currentNotifi">
                <th:block th:each="notifiSelect : ${notifiSelectList}">
                    <div class="currentNotifi_contents" id="currentNotifi_contents">
                        <p class="nSeq" style="display:none;">[[${notifiSelect.NOTI_SEQ}]]</p>
                        <p class="seq" style="display:none;">[[${notifiSelect.DIARY_SEQ}]]</p>
                        <img th:src="${notifiSelect['BGIMG_PATH'] == null ? 'img/basicProfile.png' : notifiSelect['BGIMG_PATH']}" />
                        <div class="currentNotifi_message" id="currentNotifi_message">
                            <span>[[ ${notifiSelect.MEMBER_NICK} ]] [[ ${notifiSelect.NOTI_COMM} ]]</span>
                        </div>
                    </div>
                </th:block>
            </div>
            <div class="notifi_wrapModal"></div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="/js/notifi.js" type="text/javascript"></script>
    <script>
        const myMenu = document.querySelector(".myMenu")    // ÎßàÏö∞Ïä§Î•º Ïò¨Î¶¨Î©¥ Î≥¥Ïó¨Ïïº Ìï† Î©îÎâ¥
        const myProfile = document.querySelector(".myProfile")  // ÏÉÅÎã® ÎãâÎÑ§ÏûÑÌëúÏãúÎ∂ÄÎ∂Ñ
        // ÎßàÏö∞Ïä§Í∞Ä Îì§Ïñ¥Í∞à Îïå
        const mouseOver = myProfile.addEventListener("mouseover",()=>{
            myMenu.style.display='block';
        });
        // ÎßàÏö∞Ïä§Í∞Ä ÎÇòÍ∞à Îïå
        const mouseOut = myMenu.addEventListener("mouseleave",(e)=>{
            myMenu.style.display='none';
            e.preventDefault()
        });
    </script>
</th:block>
</html>